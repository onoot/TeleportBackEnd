openapi: 3.0.3
info:
  title: Messenger API
  version: 1.0.1
  description: API –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
servers:
  - url: /api
    description: REST API —Å–µ—Ä–≤–µ—Ä–∞
  - url: ws://localhost:8083
    description: WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤
security:
  - BearerAuth: []
tags:
  - name: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    description: –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - name: –°–æ–æ–±—â–µ–Ω–∏—è
    description: –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
  - name: –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
    description: –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –∑–≤–æ–Ω–∫–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏
  - name: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    description: –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
paths:
  # User Service
  /v1/users/health:
    get:
      security: []  # –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è health check
      tags:
        - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      summary: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞
      responses:
        '200':
          description: –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
  /v1/users/register:
    post:
      security: []  # –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
      tags:
        - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      summary: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - email
                - password
              properties:
                username:
                  type: string
                  minLength: 3
                  maxLength: 30
                  description: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                  example: "testuser"
                email:
                  type: string
                  format: email
                  description: Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                  example: "test@example.com"
                password:
                  type: string
                  format: password
                  minLength: 8
                  description: –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                  example: "password123"
                settings:
                  type: object
                  description: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                  properties:
                    notifications:
                      type: boolean
                      description: –í–∫–ª—é—á–µ–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                      example: true
                    theme:
                      type: string
                      enum: [light, dark]
                      description: –¢–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                      example: "light"
                    language:
                      type: string
                      description: –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                      example: "ru"
      responses:
        '201':
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      username:
                        type: string
                      email:
                        type: string
                        format: email
                      avatar:
                        type: string
                        nullable: true
                      status:
                        type: string
                        enum: [online, offline]
                      settings:
                        type: object
                        properties:
                          notifications:
                            type: boolean
                          theme:
                            type: string
                            enum: [light, dark]
                          language:
                            type: string
        '400':
          description: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
        '500':
          description: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  /v1/users/login:
    post:
      security: []  # –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –ª–æ–≥–∏–Ω–∞
      tags:
        - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      summary: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  description: Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                  example: "user@example.com"
                password:
                  type: string
                  format: password
                  description: –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                  example: "password123"
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      username:
                        type: string
                      email:
                        type: string
                        format: email
                      avatar:
                        type: string
                        nullable: true
                      status:
                        type: string
                        enum: [online, offline]
                      settings:
                        type: object
                        properties:
                          notifications:
                            type: boolean
                          theme:
                            type: string
                            enum: [light, dark]
                          language:
                            type: string
        '401':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 401
                  message:
                    type: string
                    example: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"
        '500':
          description: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É"
  /v1/users/profile:
    get:
      tags:
        - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      security:
        - BearerAuth: []
      responses:
        '200':
          description: –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
    put:
      tags:
        - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      summary: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                email:
                  type: string
                  format: email
                avatar:
                  type: string
                settings:
                  type: object
                  properties:
                    notifications:
                      type: boolean
                    theme:
                      type: string
                      enum: [light, dark]
                    language:
                      type: string
      responses:
        '200':
          description: –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'

  # Message Service
  /v1/messages/dialogs/{userId}:
    get:
      tags:
        - –°–æ–æ–±—â–µ–Ω–∏—è
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å –∫–æ—Ç–æ—Ä—ã–º –≤–µ–¥–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
          description: –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 50
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
          content:
            application/json:
              schema:
                type: object
                properties:
                  messages:
                    type: array
                    items:
                      $ref: '#/components/schemas/Message'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
    post:
      tags:
        - –°–æ–æ–±—â–µ–Ω–∏—è
      summary: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
      responses:
        '201':
          description: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'

  /v1/messages/{messageId}:
    put:
      tags:
        - –°–æ–æ–±—â–µ–Ω–∏—è
      summary: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
      security:
        - BearerAuth: []
      parameters:
        - name: messageId
          in: path
          required: true
          schema:
            type: integer
          description: ID —Å–æ–æ–±—â–µ–Ω–∏—è
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditMessageRequest'
      responses:
        '200':
          description: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
    delete:
      tags:
        - –°–æ–æ–±—â–µ–Ω–∏—è
      summary: –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
      security:
        - BearerAuth: []
      parameters:
        - name: messageId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID —Å–æ–æ–±—â–µ–Ω–∏—è
      responses:
        '200':
          description: –°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ

  /v1/messages/{messageId}/reactions:
    post:
      tags:
        - –°–æ–æ–±—â–µ–Ω–∏—è
      summary: –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é –∫ —Å–æ–æ–±—â–µ–Ω–∏—é
      security:
        - BearerAuth: []
      parameters:
        - name: messageId
          in: path
          required: true
          schema:
            type: integer
          description: ID —Å–æ–æ–±—â–µ–Ω–∏—è
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddReactionRequest'
      responses:
        '200':
          description: –†–µ–∞–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
    delete:
      tags:
        - –°–æ–æ–±—â–µ–Ω–∏—è
      summary: –£–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é —Å —Å–æ–æ–±—â–µ–Ω–∏—è
      security:
        - BearerAuth: []
      parameters:
        - name: messageId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID —Å–æ–æ–±—â–µ–Ω–∏—è
        - name: emoji
          in: query
          required: true
          schema:
            type: string
          description: –≠–º–æ–¥–∑–∏ —Ä–µ–∞–∫—Ü–∏–∏
      responses:
        '200':
          description: –†–µ–∞–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'

  # Call Service
  /v1/calls/user/{userId}:
    post:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü–æ–∑–≤–æ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
      description: –°–æ–∑–¥–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—É—é –∫–æ–º–Ω–∞—Ç—É –∏ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –ø—Ä—è–º–æ–π –∑–≤–æ–Ω–æ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É –∑–≤–æ–Ω–∏–º
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: string
                  enum: [audio, video]
                  description: –¢–∏–ø –∑–≤–æ–Ω–∫–∞
                  example: "audio"
      responses:
        '201':
          description: –ó–≤–æ–Ω–æ–∫ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 201
                  data:
                    type: object
                    properties:
                      call:
                        $ref: '#/components/schemas/Call'
                      room:
                        $ref: '#/components/schemas/Room'
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
        '409':
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤ –∑–≤–æ–Ω–∫–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 409
                  message:
                    type: string
                    example: "–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫"

  /v1/calls/join/{roomId}:
    post:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∑–≤–æ–Ω–∫—É
      description: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∑–≤–æ–Ω–∫—É –≤ –∫–æ–º–Ω–∞—Ç–µ
      security:
        - BearerAuth: []
      parameters:
        - name: roomId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã —Å–æ –∑–≤–æ–Ω–∫–æ–º
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: string
                  enum: [audio, video]
                  description: –¢–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∑–≤–æ–Ω–∫—É
                  example: "audio"
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∑–≤–æ–Ω–∫—É
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Call'
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
        '403':
          description: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ
        '404':
          description: –ó–≤–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: "–í –∫–æ–º–Ω–∞—Ç–µ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞"
        '409':
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤ –∑–≤–æ–Ω–∫–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 409
                  message:
                    type: string
                    example: "–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫"

  /v1/calls/{callId}/accept:
    put:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü—Ä–∏–Ω—è—Ç—å –∑–≤–æ–Ω–æ–∫
      description: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –Ω–µ–º—É
      parameters:
        - name: callId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
      responses:
        '200':
          description: –ó–≤–æ–Ω–æ–∫ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–Ω—è—Ç
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Call'
        '404':
          description: –ó–≤–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
        '409':
          description: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –∑–≤–æ–Ω–æ–∫ –≤ —Ç–µ–∫—É—â–µ–º —Å—Ç–∞—Ç—É—Å–µ

  /v1/calls/{callId}/reject:
    post:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫
      description: –û—Ç–∫–ª–æ–Ω—è–µ—Ç –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
      parameters:
        - name: callId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
      responses:
        '200':
          description: –ó–≤–æ–Ω–æ–∫ —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Call'
        '404':
          description: –ó–≤–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
        '409':
          description: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫

  /v1/calls/{callId}/end:
    post:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
      description: –ó–∞–≤–µ—Ä—à–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∑–≤–æ–Ω–æ–∫
      parameters:
        - name: callId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
      responses:
        '200':
          description: –ó–≤–æ–Ω–æ–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Call'
        '404':
          description: –ó–≤–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
        '409':
          description: –ó–≤–æ–Ω–æ–∫ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω

  /v1/calls/{callId}/signal:
    post:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –û—Ç–ø—Ä–∞–≤–∏—Ç—å WebRTC —Å–∏–≥–Ω–∞–ª
      description: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ WebRTC –¥—Ä—É–≥–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É –∑–≤–æ–Ω–∫–∞
      parameters:
        - name: callId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignalingMessage'
      responses:
        '200':
          description: –°–∏–≥–Ω–∞–ª —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      success:
                        type: boolean
                        example: true
        '404':
          description: –ó–≤–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∏–≥–Ω–∞–ª–∞

  /v1/calls/{callId}/invite:
    post:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∫–æ–º–Ω–∞—Ç—É –∑–≤–æ–Ω–∫–∞
      description: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫–æ–º–Ω–∞—Ç–µ –∑–≤–æ–Ω–∫–∞
      parameters:
        - name: callId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
      responses:
        '200':
          description: –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      invite_code:
                        type: string
                        description: –ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
                      room:
                        $ref: '#/components/schemas/Room'
                      call:
                        $ref: '#/components/schemas/Call'
        '403':
          description: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ
        '404':
          description: –ó–≤–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

  # Room Service
  /v1/rooms:
    get:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É—á–∞—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
      security:
        - BearerAuth: []
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Room'
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç
    post:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É
      description: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  description: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
                  example: "–ú–æ—è –∫–æ–º–Ω–∞—Ç–∞"
      responses:
        '201':
          description: –ö–æ–º–Ω–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 201
                  data:
                    $ref: '#/components/schemas/Room'
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã

  /v1/rooms/{roomId}:
    get:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ
      security:
        - BearerAuth: []
      parameters:
        - name: roomId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
      responses:
        '200':
          description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–Ω–∞—Ç–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Room'
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '403':
          description: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ
        '404':
          description: –ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–Ω–∞—Ç–µ

  /v1/rooms/join/{inviteCode}:
    post:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ –ø–æ –∫–æ–¥—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
      description: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
      security:
        - BearerAuth: []
      parameters:
        - name: inviteCode
          in: path
          required: true
          schema:
            type: string
          description: –ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç—É
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Room'
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '404':
          description: –ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∫ –∫–æ–º–Ω–∞—Ç–µ

  /v1/rooms/{roomId}/join:
    post:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ –ø–æ ID
      description: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É—è –µ—ë ID
      security:
        - BearerAuth: []
      parameters:
        - name: roomId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    $ref: '#/components/schemas/Room'
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '404':
          description: –ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∫ –∫–æ–º–Ω–∞—Ç–µ

  /v1/rooms/{roomId}/leave:
    post:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
      description: –ü–æ–∫–∏–¥–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É
      security:
        - BearerAuth: []
      parameters:
        - name: roomId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      success:
                        type: boolean
                        example: true
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '404':
          description: –£—á–∞—Å—Ç–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–º–Ω–∞—Ç–µ
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã

  /v1/rooms/{roomId}/participants:
    get:
      tags:
        - –ö–æ–º–Ω–∞—Ç—ã
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–Ω–∞—Ç—ã
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–Ω–∞—Ç—ã
      security:
        - BearerAuth: []
      parameters:
        - name: roomId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/RoomParticipant'
        '401':
          description: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        '403':
          description: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

  # Channel Service
  /v1/channels:
    get:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
      security:
        - BearerAuth: []
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Channel'
    post:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                description:
                  type: string
                isPrivate:
                  type: boolean
      responses:
        '201':
          description: –ö–∞–Ω–∞–ª —Å–æ–∑–¥–∞–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Channel'

  /v1/channels/{channelId}:
    get:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–µ
      security:
        - BearerAuth: []
      parameters:
        - name: channelId
          in: path
          required: true
          schema:
            type: integer
          description: ID –∫–∞–Ω–∞–ª–∞
      responses:
        '200':
          description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–∞–ª–µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Channel'
    put:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–µ
      security:
        - BearerAuth: []
      parameters:
        - name: channelId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–∞–Ω–∞–ª–∞
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                isPrivate:
                  type: boolean
      responses:
        '200':
          description: –ö–∞–Ω–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Channel'
    delete:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª
      security:
        - BearerAuth: []
      parameters:
        - name: channelId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–∞–Ω–∞–ª–∞
      responses:
        '200':
          description: –ö–∞–Ω–∞–ª —É–¥–∞–ª–µ–Ω

  /v1/channels/{channelId}/members:
    get:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–∞–Ω–∞–ª–∞
      security:
        - BearerAuth: []
      parameters:
        - name: channelId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–∞–Ω–∞–ª–∞
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
    post:
      tags:
        - –ö–∞–Ω–∞–ª—ã
      summary: –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –∫–∞–Ω–∞–ª
      security:
        - BearerAuth: []
      parameters:
        - name: channelId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ID –∫–∞–Ω–∞–ª–∞
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userId
              properties:
                userId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: –£—á–∞—Å—Ç–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Channel'

  # Notification Service
  /v1/notifications:
    get:
      tags:
        - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
          description: –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 50
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /v1/notifications/unread:
    get:
      tags:
        - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      summary: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      security:
        - BearerAuth: []
      responses:
        '200':
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer

  /v1/notifications/{notificationId}/read:
    post:
      tags:
        - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      summary: –û—Ç–º–µ—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
      security:
        - BearerAuth: []
      parameters:
        - name: notificationId
          in: path
          required: true
          schema:
            type: integer
          description: ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      responses:
        '200':
          description: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ

  /ws:
    get:
      tags:
        - –ó–≤–æ–Ω–∫–∏ –∏ –ö–æ–º–Ω–∞—Ç—ã
      summary: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤
      description: |
        –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è –æ–±–º–µ–Ω–∞ WebRTC —Å–∏–≥–Ω–∞–ª–∞–º–∏.
        
        ### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        ```
        ws://localhost:8083?token=JWT_TOKEN
        ```

        ### –°–æ–æ–±—â–µ–Ω–∏—è
        
        #### –û—Ç–ø—Ä–∞–≤–∫–∞ offer:
        ```json
        {
          "type": "offer",
          "payload": {
            "sdp": "v=0\r\n..."
          },
          "to": "user-id",
          "roomId": "room-id"
        }
        ```

        #### –û—Ç–ø—Ä–∞–≤–∫–∞ answer:
        ```json
        {
          "type": "answer",
          "payload": {
            "sdp": "v=0\r\n..."
          },
          "to": "user-id",
          "roomId": "room-id"
        }
        ```

        #### –û—Ç–ø—Ä–∞–≤–∫–∞ ICE candidate:
        ```json
        {
          "type": "ice-candidate",
          "payload": {
            "candidate": "candidate:1234...",
            "sdpMLineIndex": 0,
            "sdpMid": "0"
          },
          "to": "user-id",
          "roomId": "room-id"
        }
        ```

        ### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
        –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–º–µ—é—Ç –ø–æ–ª–µ `from` –≤–º–µ—Å—Ç–æ `to`:
        ```json
        {
          "type": "offer|answer|ice-candidate",
          "payload": {...},
          "from": "user-id",
          "roomId": "room-id"
        }
        ```

        ### –û—à–∏–±–∫–∏
        ```json
        {
          "type": "error",
          "message": "Error description"
        }
        ```
      responses:
        '101':
          description: WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
        '401':
          description: –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: "error"
                  message:
                    type: string
                    example: "Authentication failed"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    AuthResponse:
      type: object
      properties:
        token:
          type: string
        user:
          $ref: '#/components/schemas/UserProfile'
    UserProfile:
      type: object
      properties:
        id:
          type: integer
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        username:
          type: string
        email:
          type: string
        avatar:
          type: string
        status:
          type: string
          enum: [online, offline]
        settings:
          type: object
          properties:
            notifications:
              type: boolean
            theme:
              type: string
              enum: [light, dark]
            language:
              type: string
    Message:
      type: object
      properties:
        id:
          type: integer
          description: ID —Å–æ–æ–±—â–µ–Ω–∏—è
        content:
          type: string
        senderId:
          type: integer
          description: ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
        attachments:
          type: array
          items:
            type: string
        replyToId:
          type: integer
          description: ID —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–≤–µ—á–∞—é—Ç
          nullable: true
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/Reaction'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    SendMessageRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
        attachments:
          type: array
          items:
            type: string
        replyToId:
          type: string
          format: uuid
          nullable: true
    EditMessageRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
        attachments:
          type: array
          items:
            type: string
    AddReactionRequest:
      type: object
      required:
        - emoji
      properties:
        emoji:
          type: string
          example: "üëç"
    Reaction:
      type: object
      properties:
        userId:
          type: string
          format: uuid
        emoji:
          type: string
        createdAt:
          type: string
          format: date-time
    Call:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
        room_id:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
        initiator_id:
          type: string
          format: uuid
          description: ID –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –∑–≤–æ–Ω–∫–∞
        type:
          type: string
          enum: [audio, video]
          description: –¢–∏–ø –∑–≤–æ–Ω–∫–∞
        status:
          type: string
          enum: [initiated, connected, ended, rejected]
          description: –°—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–∞
        start_time:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∑–≤–æ–Ω–∫–∞
        end_time:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞
        duration:
          type: integer
          description: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    Channel:
      type: object
      properties:
        id:
          type: integer
          description: ID –∫–∞–Ω–∞–ª–∞
        name:
          type: string
        description:
          type: string
        isPrivate:
          type: boolean
        creatorId:
          type: integer
          description: ID —Å–æ–∑–¥–∞—Ç–µ–ª—è –∫–∞–Ω–∞–ª–∞
        members:
          type: array
          items:
            $ref: '#/components/schemas/User'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    User:
      type: object
      properties:
        id:
          type: integer
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        username:
          type: string
        email:
          type: string
        avatar:
          type: string
        status:
          type: string
          enum: [online, offline]
    Notification:
      type: object
      properties:
        id:
          type: integer
          description: ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        type:
          type: string
          enum: [message, call, channel, friend_request]
        content:
          type: string
        data:
          type: object
        isRead:
          type: boolean
        createdAt:
          type: string
          format: date-time
    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        hasMore:
          type: boolean
    Room:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
        name:
          type: string
          description: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
        created_by:
          type: string
          format: uuid
          description: ID —Å–æ–∑–¥–∞—Ç–µ–ª—è –∫–æ–º–Ω–∞—Ç—ã
        invite_code:
          type: string
          description: –ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç—É
        is_active:
          type: boolean
          description: –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–æ–º–Ω–∞—Ç–∞
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    RoomParticipant:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID –∑–∞–ø–∏—Å–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞
        room_id:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
        user_id:
          type: string
          format: uuid
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        is_admin:
          type: boolean
          description: –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–æ–º–Ω–∞—Ç—ã
        joined_at:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫–æ–º–Ω–∞—Ç–µ
        left_at:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    SignalingMessage:
      type: object
      required:
        - type
        - payload
        - to
      properties:
        type:
          type: string
          enum: [offer, answer, ice-candidate]
          description: –¢–∏–ø —Å–∏–≥–Ω–∞–ª–∞ WebRTC
        payload:
          type: object
          description: –î–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª–∞
        from:
          type: string
          format: uuid
          description: ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å–∏–≥–Ω–∞–ª–∞
        to:
          type: string
          format: uuid
          description: ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å–∏–≥–Ω–∞–ª–∞
        roomId:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã –∑–≤–æ–Ω–∫–∞
    WebSocketMessage:
      type: object
      required:
        - type
        - payload
      properties:
        type:
          type: string
          enum:
            - offer
            - answer
            - ice-candidate
            - error
        payload:
          type: object
          description: –î–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª–∞ WebRTC (SDP –∏–ª–∏ ICE candidate)
        from:
          type: string
          format: uuid
          description: ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª—É—á–∞–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö)
        to:
          type: string
          format: uuid
          description: ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –≤ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö)
        roomId:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã –∑–≤–æ–Ω–∫–∞
        message:
          type: string
          description: –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è type=error)
    Call:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID –∑–≤–æ–Ω–∫–∞
        room_id:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
        initiator_id:
          type: string
          format: uuid
          description: ID –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –∑–≤–æ–Ω–∫–∞
        type:
          type: string
          enum: [audio, video]
          description: –¢–∏–ø –∑–≤–æ–Ω–∫–∞
        status:
          type: string
          enum: [initiated, connected, ended, rejected]
          description: –°—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–∞
        start_time:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∑–≤–æ–Ω–∫–∞
        end_time:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞
        duration:
          type: integer
          description: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    Channel:
      type: object
      properties:
        id:
          type: integer
          description: ID –∫–∞–Ω–∞–ª–∞
        name:
          type: string
        description:
          type: string
        isPrivate:
          type: boolean
        creatorId:
          type: integer
          description: ID —Å–æ–∑–¥–∞—Ç–µ–ª—è –∫–∞–Ω–∞–ª–∞
        members:
          type: array
          items:
            $ref: '#/components/schemas/User'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    User:
      type: object
      properties:
        id:
          type: integer
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        username:
          type: string
        email:
          type: string
        avatar:
          type: string
        status:
          type: string
          enum: [online, offline]
    Notification:
      type: object
      properties:
        id:
          type: integer
          description: ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        type:
          type: string
          enum: [message, call, channel, friend_request]
        content:
          type: string
        data:
          type: object
        isRead:
          type: boolean
        createdAt:
          type: string
          format: date-time
    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        hasMore:
          type: boolean
    Room:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
        name:
          type: string
          description: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
        created_by:
          type: string
          format: uuid
          description: ID —Å–æ–∑–¥–∞—Ç–µ–ª—è –∫–æ–º–Ω–∞—Ç—ã
        invite_code:
          type: string
          description: –ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç—É
        is_active:
          type: boolean
          description: –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–æ–º–Ω–∞—Ç–∞
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    RoomParticipant:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID –∑–∞–ø–∏—Å–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞
        room_id:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã
        user_id:
          type: string
          format: uuid
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        is_admin:
          type: boolean
          description: –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–æ–º–Ω–∞—Ç—ã
        joined_at:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫–æ–º–Ω–∞—Ç–µ
        left_at:
          type: string
          format: date-time
          description: –í—Ä–µ–º—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    SignalingMessage:
      type: object
      required:
        - type
        - payload
        - to
      properties:
        type:
          type: string
          enum: [offer, answer, ice-candidate]
          description: –¢–∏–ø —Å–∏–≥–Ω–∞–ª–∞ WebRTC
        payload:
          type: object
          description: –î–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª–∞
        from:
          type: string
          format: uuid
          description: ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å–∏–≥–Ω–∞–ª–∞
        to:
          type: string
          format: uuid
          description: ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å–∏–≥–Ω–∞–ª–∞
        roomId:
          type: string
          format: uuid
          description: ID –∫–æ–º–Ω–∞—Ç—ã –∑–≤–æ–Ω–∫–∞ 